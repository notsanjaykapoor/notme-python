{% extends "base.html" %}

{% block content %}

<div class="container grid grid-cols-12">
  <div class="col-span-12 mt-10">
    <h3 class="font-bold text-center">
      {{ app_name }}
    </h3>
  </div>
  <div class="col-start-2 col-span-10 mt-2 opacity-50 text-center text-xs text-zinc-400">
    @{{ app_version }}
  </div>
</div>

<div class="container grid grid-cols-12 mt-10">
  <div class="col-span-12">
    <h5 class="font-bold text-center text-blue-700">
      {{ corpus.name }}
    </h5>
  </div>
</div>

{% if false %}
<div class="container grid grid-cols-12 mt-5" id="corpus-table">
  <table class="col-start-5 col-span-4">
    <thead class="font-normal text-center text-sm leading-6 text-zinc-800">
      <tr>
        <th class="p-4 pr-6">epoch</th>
        <th class="p-4 pr-6">state</th>
        <th class="p-4 pr-6"></th>
      </tr>
    </thead>
    <tbody>
      <tr class="group hover:bg-zinc-50 bg-white font-bold text-center text-sm">
        <td class="p-4 pr-6 font-normal">{{corpus.epoch}}</td>
        <td class="p-4 pr-6 font-normal">{{corpus.state}}</td>
        <td class="p-4 pr-6 font-normal">
          <a href="/admin/corpus/ingest?corpus_id={{corpus.id}}"
            <button type="button" class="text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
              Ingest
            </button>
          </a>
          <a href="/rag/query?corpus={{corpus.name}}"
            <button type="button" class="text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
              Query
            </button>
          </a>
        </td>
      </td>
    <tbody>
  </table>
</div>
{% endif %}

<div class="container grid grid-cols-12 mt-10">
  <div class="col-start-4 col-span-6">
    <div class="p-6 bg-white border border-gray-200 rounded-lg shadow">
      <table style="width: 100%">
        <thead class="text-center text-sm leading-6 text-zinc-800">
          <tr>
            <th class="p-4 pr-6">epoch</th>
            <th class="p-4 pr-6">state</th>
            <th class="p-4 pr-6">files</th>
            <th class="p-4 pr-6">nodes</th>
            <th class="p-4 pr-6">docs</th>
          </tr>
        </thead>
        <tbody class="text-center text-sm leading-6 text-zinc-800">
          <tr class="group hover:bg-zinc-50 bg-white font-bold">
            <td class="p-4 pr-6 font-normal">{{corpus.epoch}}</td>
            <td class="p-4 pr-6 font-normal">{{corpus.state}}</td>
            <td class="p-4 pr-6 font-normal">{{corpus.files_count}}</td>
            <td class="p-4 pr-6 font-normal">{{corpus.nodes_count}}</td>
            <td class="p-4 pr-6 font-normal">{{corpus.docs_count}}</td>
          </tr>
        </tbody>
      </table>
      <table class="mt-10" style="width: 100%">
        <tfoot>
          <tr></tr>
          <tr>
            {% if corpus.ingestable == 0 %}
              <td class="text-center">
                <a href="/admin/corpus/ingest?corpus_id={{corpus.id}}"
                  <button type="button" class="text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                    Ingest
                  </button>
                </a>
              </td>
              <td class="text-center">
                <a href="/rag/query?corpus={{corpus.name}}"
                  <button type="button" class="text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">
                    Query
                  </button>
                </a>
              </td>
            {% endif %}
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>

{% endblock %}

